<!DOCTYPE html>
<html><head><meta charset='UTF-8'></meta>
<title>centaurihelp â”€ _centauri_bash_tra</title>
<link rel='stylesheet' type='text/css' href='default.css'></link>
<script type='text/javascript' src='default.js'></script>
</head><body><article id='top'>
<nav><div class='nav-row'>
<div class='nav-left'><a href='_centauri_bash_sys.html'>[&lt;&lt; previous]</a></div>
<div class='nav-mid'><a href='content.html#top'>[Content]</a></div>
<div class='nav-mid'><a href='reference.html#top'>[Reference]</a></div>
<div class='nav-right'><a href='_centauri_bash_txt.html'>[next &gt;&gt;]</a></div>
</div></nav>
<section id='section-1'>
<div id='_centauri_bash_tra' class='item-module'>
<span>Module</span><span> - </span><span>_centauri_bash_tra</span><span> - </span><span><a href="index.html">Centauri Bash Library</a> Trash Support</span></div>
<div class='def-row'>
<div class='def-label'>Call:</div>
<div class='def-text'>. <b>_centauri_bash_tra</b> [<b>-n</b>]</div>
</div>
<div class='def-row'>
<div class='def-label'>Options:</div>
<div class='def-text'><b>-n</b>  no module init</div>
</div>
<div class='def-row'>
<div class='def-label'>Remarks:</div>
<div class='def-block'>This module adds the <b>--trash</b> option to a script, depending on the module options described above.</div>
</div>
<div class='def-break'></div>
<div class='def-row'>
<div class='def-empty'></div>
<div class='def-block'>The module implements exactly one public function: <a href="#trash">trash()</a></div>
</div>
<div class='def-break'></div>
<div class='def-row'>
<div class='def-empty'></div>
<div class='def-block'>Supported trash methods are: <b>&quot;rm&quot;</b> (no trash), <b>&quot;gio&quot;</b>/<b>&quot;kioclient&quot;</b> (trash:/) or move to a folder. In the later case a folder named <b>&quot;[dD]Deleted&quot;</b> can be searched by descending into the folder hierarchy.</div>
</div>
<div class='def-break'></div>
<div class='def-row'>
<div class='def-empty'></div>
<div class='def-block'>The script command line option <b>&quot;--trash&quot;</b> behaves as follows:</div>
</div>
<div class='def-break'></div>
<div class='def-row'>
<div class='def-empty'></div>
<div class='def-text'>  <b>--trash</b>=0   force method <b>&quot;rm&quot;</b>
  <b>--trash</b>=1   autodetect method, fatal if no trash folder is found
  <b>--trash</b>=2   autodetect method, fall back to <b>&quot;rm&quot;</b></div>
</div>
<div class='def-break'></div>
<div class='def-row'>
<div class='def-empty'></div>
<div class='def-block'>Copyright Dr. J. Pfennig (c) 2021-2022</div>
</div>
</section>
<section id='section-2'>
<div id='trash' class='item-function'>
<span>Function</span><span> - </span><span>trash</span><span> - </span><span>handle trash folder</span></div>
<div class='def-row'>
<div class='def-label'>Call:</div>
<div class='def-text'>(1) <b>trash</b> <b>-i</b> [<i>meth</i>]
(2) <b>trash</b> <b>-w</b>
(3) <b>trash</b> [<b>-f</b>] [<b>-p</b> <i>pref</i>] [<b>-s</b>] [<b>--</b>] <i>item</i>...</div>
</div>
<div class='def-row'>
<div class='def-label'>Options:</div>
<div class='def-text'><b>-f</b>   flush queue (before adding new items)
<b>-i</b>   exiplicitly initialize the <b>trash</b> method
<b>-p</b>   flush (after adding items) using a prefix
<b>-s</b>   silent, generate no <a href="_centauri_bash_lib.html#trace">trace()</a> messages
<b>-w</b>   warning if method is &apos;rm&apos;, allow user to quit</div>
</div>
<div class='def-row'>
<div class='def-label'>Arguments:</div>
<div class='def-text'><i>meth</i>  one of: <b>&quot;rm&quot;</b> <b>&quot;gio&quot;</b> <b>&quot;kioclient&quot;</b> or a folder path
<i>pref</i>  used with method <b>&quot;rm&quot;</b>
<i>item</i>  file-system object to be removed</div>
</div>
<div class='def-row'>
<div class='def-label'>Remarks:</div>
<div class='def-block'>Trash items are not removed synchronously but added to a queue. The queue gets flushed automatically at program exit or explicitly (see options <b>-f</b> and <b>-p</b>).</div>
</div>
<div class='def-break'></div>
<div class='def-row'>
<div class='def-empty'></div>
<div class='def-block'>The trash method can be set explicitly (<b>-i</b> option) or is determined on 1st use. Method <b>&quot;kioclient&quot;</b> is used only if <b>&quot;gio&quot;</b> is not available and if the <b>&quot;DISPLAY=&lt;display&gt;&quot;</b> or <b>&quot;XDG_SESSION_TYPE=wayland&quot;</b> variables are set.</div>
</div>
<div class='def-break'></div>
<div class='def-row'>
<div class='def-empty'></div>
<div class='def-block'>When a folder is used to move deleted items into, a prefix can be specified on flush. This is a minimalistic way to flag the origin of a deleted file. Moving items to a folder will replace items with the same name.</div>
</div>
<div class='def-break'></div>
<div class='def-row'>
<div class='def-empty'></div>
<div class='def-block'>The <b>-w</b> option has no effect if the script was called with option <b>--trash</b>.</div>
</div>
</section>
</article>
<div class='def-break'></div>
<nav><div class='nav-row'>
<div class='nav-left'><a href='_centauri_bash_sys.html'>[&lt;&lt; previous]</a></div>
<div class='nav-mid'><a href='#top'>[Top of Page]</a></div>
<div class='nav-mid'><a href='reference.html#top'>[Reference]</a></div>
<div class='nav-right'><a href='_centauri_bash_txt.html'>[next &gt;&gt;]</a></div>
</div></nav>
</body></html>
