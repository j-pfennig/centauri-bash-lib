<!DOCTYPE html>
<html><head><meta charset='UTF-8'></meta>
<title>centaurihelp ─ _centauri_bash_con</title>
<link rel='stylesheet' type='text/css' href='default.css'></link>
<script type='text/javascript' src='default.js'></script>
</head><body><article id='top'>
<nav><div class='nav-row'>
<div class='nav-left'><a href='_centauri_bash_cgi.html'>[&lt;&lt; previous]</a></div>
<div class='nav-mid'><a href='content.html#top'>[Content]</a></div>
<div class='nav-mid'><a href='reference.html#top'>[Reference]</a></div>
<div class='nav-right'><a href='_centauri_bash_dbg.html'>[next &gt;&gt;]</a></div>
</div></nav>
<section id='section-1'>
<div id='_centauri_bash_con' class='item-module'>
<span>Module</span><span> - </span><span>_centauri_bash_con</span><span> - </span><span><a href="index.html">Centauri Bash Library</a> Console Support</span></div>
<div class='def-row'>
<div class='def-label'>Call:</div>
<div class='def-text'>. <b>_centauri_bash_con</b> [<b>-n</b>|<b>-i</b>]</div>
</div>
<div class='def-row'>
<div class='def-label'>Options:</div>
<div class='def-text'><b>-n</b>  no init at all
<b>-i</b>  simple init, <b>CEN_COLS</b>/<b>CEN_ROWS</b> not set</div>
</div>
<div class='def-row'>
<div class='def-label'>Remarks:</div>
<div class='def-block'>This module adds ANSI escape support, <a href="_centauri_bash_pro.html#progress">progress()</a> reporting, and (ANSI) decorated <a href="#output">output()</a>. Also the <b>-b</b> and <b>-d</b> option of <a href="_centauri_bash_lib.html#message">message()</a> will be enabled, see <b>-b</b> and <b>-d</b> of <a href="#output">output()</a>.</div>
</div>
<div class='def-break'></div>
<div class='def-row'>
<div class='def-empty'></div>
<div class='def-block'>The module cannot be loaded at the same time as <a href="_centauri_bash_win.html">_centauri_bash_win</a>. Any attempt to do so causes a call to <a href="_centauri_bash_lib.html#fatal">fatal()</a>. Consider using option <b>-g</b> of <a href="_centauri_bash_lib.html">_centauri_bash_lib</a> to enable choosing between <a href="_centauri_bash_con.html">_centauri_bash_con</a> and <a href="_centauri_bash_win.html">_centauri_bash_win</a> at script start (adds option <b>--gui</b>).</div>
</div>
<div class='def-break'></div>
<div class='def-row'>
<div class='def-empty'></div>
<div class='def-block'>Copyright Dr. J. Pfennig (c) 2015-2021</div>
</div>
</section>
<section id='section-2'>
<div id='console' class='item-function'>
<span>Function</span><span> - </span><span>console</span><span> - </span><span>query/initialize console mode support</span></div>
<div class='def-row'>
<div class='def-label'>Call:</div>
<div class='def-text'><b>console</b> [<b>-m</b> <b>0</b>|<b>1</b>|<b>2</b>|<b>3</b>] [<b>-c</b> <b>0</b>|<i>cols</i>] [<b>-r</b> <b>0</b>|<i>rows</i>]</div>
</div>
<div class='def-row'>
<div class='def-label'>Options:</div>
<div class='def-text'><b>-c</b>  colums to use (<b>0</b> := current COLUMNS)
<b>-r</b>  rows to use   (<b>0</b> := current LINES)
<b>-m</b>  force mode <b>0</b>: disable  <b>1</b>: fancy  <b>2</b>: simple  <b>3</b>: auto</div>
</div>
<div class='def-row'>
<div class='def-label'>Return:</div>
<div class='def-text'><b>false</b> if <b>console</b> mode is not supported (mode <b>0</b>)</div>
</div>
<div class='def-row'>
<div class='def-label'>Remarks:</div>
<div class='def-block'>The function does implicit initialization on 1st call, which usually is done at module load time. Decorated output and <a href="_centauri_bash_pro.html#progress">progress()</a> depend on a successfull init call (mode <b>1</b> or <b>2</b>).</div>
</div>
<div class='def-break'></div>
<div class='def-row'>
<div class='def-empty'></div>
<div class='def-block'>Without option <b>-m</b> the function only sets mode <b>2</b> if <b>stderr</b> goes to a terminal and sets mode <b>1</b> if also the TERM variable is set to <b>&quot;xterm*&quot;</b> or <b>&quot;linux&quot;</b>. In mode <b>2</b> no ANSII escape sequences are set. For mode <b>3</b> <b>stdout</b> must go to a terminal or command line option <b>--force</b> must be set.</div>
</div>
<div class='def-break'></div>
<div class='def-row'>
<div class='def-empty'></div>
<div class='def-block'>If not disabled the program <b>/usr/bin/tput</b> is used to get COLUMNS and LINES:</div>
</div>
<div class='def-break'></div>
<div class='def-row'>
<div class='def-empty'></div>
<div class='def-text'>      <b>CEN_COLS</b>          # number of tty columns
      <b>CEN_ROWS</b>          # number of tty rows</div>
</div>
<div class='def-break'></div>
<div class='def-row'>
<div class='def-empty'></div>
<div class='def-block'>The following ANSI escape sequences will be set in mode <b>1</b>:</div>
</div>
<div class='def-break'></div>
<div class='def-row'>
<div class='def-empty'></div>
<div class='def-text'>      <b>CEN_DECO_MARK</b>     # print inverse (ESC sequence for VT100)
      <b>CEN_DECO_BOLD</b>     # &quot;     bold
      <b>CEN_DECO_ITAL</b>     # &quot;     italic
      <b>CEN_DECO_ULIN</b>     # &quot;     underline
      <b>CEN_DECO_NORM</b>     # &quot;     normal</div>
</div>
</section>
<section id='section-3'>
<div id='decorate' class='item-function'>
<span>Function</span><span> - </span><span>decorate</span><span> - </span><span>enclose text in escape sequences</span></div>
<div class='def-row'>
<div class='def-label'>Call:</div>
<div class='def-text'><b>decorate</b> [<b>-l</b>] [<b>-m</b>] [<b>-a</b>|<b>-s</b> <i>rslt</i>] [<b>-d</b> <i>deco</i>] <i>text</i>...</div>
</div>
<div class='def-row'>
<div class='def-label'>Arguments:</div>
<div class='def-text'><i>deco</i>  decoration mode, see below for values
<i>text</i>  Data to be processed, multiple arguments are concatenated
      and are separated be spaces
<i>rslt</i>  variable to receice the output</div>
</div>
<div class='def-row'>
<div class='def-label'>Options:</div>
<div class='def-text'><b>-a</b>  append result to <i>rslt</i>
<b>-d</b>  deco style
<b>-l</b>  add new-line
<b>-m</b>  multi-line mode, repeat decoration per line
<b>-s</b>  save result to <i>rslt</i> (default is <b>CEN_DECORATE</b>)</div>
</div>
<div class='def-row'>
<div class='def-label'>Modes:</div>
<div class='def-block'>The mode can be -, a digit or a keyword. Most modes prepend the data with a starting escape sequence and append an escape to go back to normal text mode.</div>
</div>
<div class='def-break'></div>
<div class='def-row'>
<div class='def-empty'></div>
<div class='def-text'><b>-        </b>   just copy, no decoration
<b>1  bold  </b>   bold text, back to normal
<b>2  mark  </b>   inverted text, back to normal
<b>3  italic</b>   italics text, back to normal
<b>4  uline </b>   undelined text, back to normal
<b>9  remove</b>   remove escape sequences from input
<b>0  normal</b>   back to normal, than text</div>
</div>
</section>
<section id='section-4'>
<div id='output' class='item-function'>
<span>Function</span><span> - </span><span>output</span><span> - </span><span>output formatted, write to stdout or a variable</span></div>
<div class='def-row'>
<div class='def-label'>Call:</div>
<div class='def-text'><b>output</b> [<b>-l</b>|<b>-m</b>] [<b>-p</b>] [<b>-b</b> <i>offs</i>[:<i>balg</i>[:<i>plen</i>]]] [<b>-d</b> <i>cols</i>] [<b>-d</b> <i>deco</i>]
       [<b>-i</b> <i>idnt</i>] [<b>-v</b> <i>vari</i>] [<b>-x</b> <i>xcnt</i> [<i>xchr</i>]] [<b>--</b>] <i>text</i>...</div>
</div>
<div class='def-row'>
<div class='def-label'>Options:</div>
<div class='def-text'><b>-b</b>  line breaking, wrap long lines with optional indentation
<b>-d</b>  use decorated <b>output</b>, see <a href="#decorate">decorate()</a>
<b>-i</b>  indent <b>output</b> with spaces
<b>-j</b>  join args, separated by space
<b>-l</b>  append new-line
<b>-m</b>  print multiple lines (new-line separated), implies <b>-l</b>
<b>-p</b>  use fprintf formatting (1st arg is format)
<b>-v</b>  append result to variable
<b>-w</b>  set line width (overrides <b>CEN_COLS</b>)
<b>-x</b>  expand width with spaces or other speficied chars</div>
</div>
<div class='def-row'>
<div class='def-label'>Arguments:</div>
<div class='def-text'><i>offs</i>  indentation after line breaking, see <b>-b</b>
<i>balg</i>  algorithms for option <b>-b</b>, bitmask with:
         <b>1|trim left</b>  <b>2|word breaks</b>  <b>4|hyphens</b>
<i>cols</i>  columns per line
<i>deco</i>  ANSII escape sequences for decoration:
         <b>1</b>|<b>bold</b>  <b>2</b>|<b>mark</b> <b>3</b>|<b>italic</b> <b>4</b>|<b>underline</b>
      and two special values for line style chars:
         <b>-</b>|<b>one</b>  <b>=</b>|<b>two</b>
<i>idnt</i>  indentation in characters (prefixes spaces)
<i>vari</i>  variable for <b>output</b>
<i>xcnt</i>  expand count in characters
<i>xchr</i>  expand character (default is space)
<i>text</i>  <b>output</b> text or template</div>
</div>
<div class='def-row'>
<div class='def-label'>Examples:</div>
<div class='def-text'><pre><b>output</b> <b>-l</b> <b>&quot;tick&quot;</b> <b>&quot;&quot;</b> <b>&quot;tack&quot;</b>  # write three lines
<b>output</b> <b>-j</b> <b>-l</b> <b>&quot;one&quot;</b> <b>&quot;two&quot;</b>    # write one line
<b>output</b> <b>-l</b>                   # empty line
<b>output</b> <b>-d</b> bold <b>-i</b> 4 <b>&quot;***&quot;</b>   # indented bold</pre></div>
</div>
<div class='def-break'></div>
<div class='def-row'>
<div class='def-empty'></div>
<div class='def-text'><pre><b>output</b> <b>-x</b> 8   <b>--</b> <b>&quot;Hello&quot;</b>    # write &quot;Hello &quot;
<b>output</b> <b>-x</b> 8 . <b>--</b> <b>&quot;Hello&quot;</b>    # write &quot;Hello...&quot;
<b>output</b> <b>-d</b> two <b>-x</b> 8 .        # write &quot;════════&quot;
<b>output</b> <b>-d</b> two <b>--</b> <b>&quot;12 4 67 &quot;</b> # write &quot;══ ═ ══ &quot;</pre></div>
</div>
</section>
<section id='section-5'>
<div id='tabulator' class='item-function'>
<span>Function</span><span> - </span><span>tabulator</span><span> - </span><span>output a table row with decoration</span></div>
<div class='def-row'>
<div class='def-label'>Call:</div>
<div class='def-text'><b>tabulator</b> [<b>-a</b>|<b>-n</b>] [<b>-b</b> <i>balg</i>] [<b>-i</b> <i>idnt</i>] [<b>-w</b> <i>cols</i>] [<b>--</b>]
          [[<i>width</i>][:<i>deco</i>] <i>text</i>]...</div>
</div>
<div class='def-row'>
<div class='def-label'>Options:</div>
<div class='def-text'><b>-a</b>  print application name on 1st output, indent otherwise
<b>-b</b>  modify line breaking (use 0 to disable)
<b>-i</b>  indent by prefixing with spaces
<b>-n</b>  prefix with application name (overrides <b>-a</b>)
<b>-w</b>  set line width (overrides <b>CEN_COLS</b>)</div>
</div>
<div class='def-row'>
<div class='def-label'>Arguments:</div>
<div class='def-text'><i>balg</i>  algorithms for line breaking, see <a href="#output">output()</a>
<i>cols</i>  columns per line
<i>width</i> colunm width, use <i>text</i> size if -
<i>deco</i>  column deco mode, see <a href="#decorate">decorate()</a>
<i>text</i>  column text</div>
</div>
<div class='def-row'>
<div class='def-label'>Example:</div>
<div class='def-text'><pre>local head=<b>&quot;ISO  Code  Country______&quot;</b>           # text/template
output    <b>-i</b> 5 <b>-l</b> <b>--</b> <b>&quot;${head//_/ }&quot;</b>             # title text
output    <b>-i</b> 5 <b>-l</b> <b>-d</b> one <b>--</b> <b>&quot;$head&quot;</b>             # header line
<b>tabulator</b> <b>-i</b> 5 <b>--</b> 4:ital <b>&quot; FR&quot;</b> 5 <b>&quot;33&quot;</b> :bold <b>&quot;France&quot;</b>
<b>tabulator</b> <b>-i</b> 5 <b>--</b> 4:ital <b>&quot; DE&quot;</b> 5 <b>&quot;49&quot;</b> :bold <b>&quot;Germany&quot;</b>
output    <b>-i</b> 5 <b>-l</b> <b>-d</b> two <b>--</b> <b>&quot;${head// /_}&quot;</b>      # footer line</pre></div>
</div>
</section>
</article>
<div class='def-break'></div>
<nav><div class='nav-row'>
<div class='nav-left'><a href='_centauri_bash_cgi.html'>[&lt;&lt; previous]</a></div>
<div class='nav-mid'><a href='#top'>[Top of Page]</a></div>
<div class='nav-mid'><a href='reference.html#top'>[Reference]</a></div>
<div class='nav-right'><a href='_centauri_bash_dbg.html'>[next &gt;&gt;]</a></div>
</div></nav>
</body></html>
