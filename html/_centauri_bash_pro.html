<!DOCTYPE html>
<html><head><meta charset='UTF-8'></meta>
<title>centaurihelp ─ _centauri_bash_pro</title>
<link rel='stylesheet' type='text/css' href='default.css'></link>
<script type='text/javascript' src='default.js'></script>
</head><body onload='initialize("_centauri_bash_pro")'><article id='top'>
<nav><div class='nav-row'>
<div class='nav-left'><a href='_centauri_bash_pip.html'>[&lt;&lt; previous]</a></div>
<div class='nav-mid'><a href='content.html#top'>[Content]</a></div>
<div class='nav-mid'><a href='reference.html#top'>[Reference]</a></div>
<div class='nav-right'><a href='_centauri_bash_run.html'>[next &gt;&gt;]</a></div>
</div></nav>
<section id='section-1'>
<div id='_centauri_bash_pro' class='item-module'>
<span>Module</span><span> - </span><span>_centauri_bash_pro</span><span> - </span><span><a href="index.html">centauri-bash-lib</a>: Progress display support</span></div>
<div class='def-row'>
<div class='def-label'>Call:</div>
<div class='def-text'>. <b>_centauri_bash_pro</b></div>
</div>
<div class='def-row'>
<div class='def-label'>Remarks:</div>
<div class='def-block'>This module implements the <a href="#progress">progress()</a> function, which is a frontend of two different implementations. One is in <a href="_centauri_bash_con.html">_centauri_bash_con</a> and is used in console mode, the other is in <a href="_centauri_bash_win.html">_centauri_bash_win</a> and is used in windows mode. These two modules cannot be loaded at the same time.</div>
</div>
<div class='def-break'></div>
<div class='def-row'>
<div class='def-empty'></div>
<div class='def-block'>Console or windows mode are either enabled explicitly by calling <a href="_centauri_bash_con.html#console">console()</a> or <a href="_centauri_bash_win.html#windows">windows()</a> or by using a library feature option, see <a href="_centauri_bash_lib.html">_centauri_bash_lib</a>. Some functions implicitly load one of these modules. So the <a href="#progress">progress()</a> function will load <a href="_centauri_bash_con.html">_centauri_bash_con</a> implicitly if not yet in windows mode.</div>
</div>
<div class='def-break'></div>
<div class='def-row'>
<div class='def-empty'></div>
<div class='def-block'>Copyright Dr. J. Pfennig (c) 2022</div>
</div>
</section>
<section id='section-2'>
<div id='progress' class='item-function'>
<span>Function</span><span> - </span><span>progress</span><span> - </span><span>progress bar or incremental progress reporting</span></div>
<div class='def-row'>
<div class='def-label'>Call:</div>
<div class='def-text'><b>progress</b> [<b>-a</b>|<b>-i</b>] [<b>-e</b>] [<b>-l</b>] [<b>-s</b> <i>step</i>]
         [<b>-d</b> <i>delay</i>]                      # dryrun delay in [s]
         [<b>-c</b> <i>prog</i> [<b>-p</b>|<b>-t</b> <i>args</i>...]]       # incremental output
<b>progress</b> <b>-p</b> <i>fmt</i> [<i>args</i>...]                # line output (printf formatting)
<b>progress</b> <b>-s</b> <i>step</i> [<b>-p</b>|<b>-t</b> <i>args</i>...]         # step by
<b>progress</b> <b>-t</b> <i>args</i>...                      # line output
<b>progress</b> <i>fmt</i> [<i>args</i>...]                   # same as: -p &lt;fmt&gt; -t &lt;args&gt;...
<b>progress</b> [<b>-e</b>]                            # -no args- clear progress output
<b>progress</b> <b>-w</b> <i>work</i> <b>-s</b> <i>step</i>
         <b>-c</b> <i>fmt</i> [<i>labl</i> [<i>done</i>|<b>-</b>]]          # progress iterator</div>
</div>
<div class='def-break'></div>
<div class='def-row'>
<div class='def-empty'></div>
<div class='def-block'>Progress reporting has two implementations (console and windows mode) that behave similar but are not identical. The <b>progress</b> implementation in <a href="_centauri_bash_svc.html">_centauri_bash_svc</a> is completely different, see <a href="_centauri_bash_svc.html#progressservice">progress (service)</a>.</div>
</div>
<div class='def-row'>
<div class='def-label'>Options:</div>
<div class='def-text'><b>••• console mode •••</b>
<b>-a</b>  indent all but 1st invokation
<b>-c</b>  incremental mode (ignored if arg is a number)
<b>-d</b>  add delay in dryrun mode
<b>-e</b>  end incremental/line mode (keep output)
<b>-i</b>  indent (no program name)
<b>-l</b>  line output (used also by <b>-p</b> and <b>-c</b>)
<b>-p</b>  line output, like <b>-t</b> but with printf formatting
<b>-s</b>  like <b>&quot;-c .&quot;</b> if <i>step</i> is a number
<b>-t</b>  line output (no <b>-c</b>), rewrite <b>progress</b> text (with <b>-c</b>)
<b>-v</b>  disable <b>progress</b> output in verbose/trace mode
<b>-w</b>  <b>progress</b> iterator</div>
</div>
<div class='def-break'></div>
<div class='def-row'>
<div class='def-empty'></div>
<div class='def-text'><b>••• windows mode (options -a -i and -v are silently ignored) •••</b>
<b>-c</b>  set/increment progess bar
<b>-d</b>  add <i>delay</i> in dryrun mode
<b>-e</b>  close window (same as <b>progress</b> without args)
<b>-l</b>  notification message
<b>-p</b>  set label (<b>printf</b> formatting)
<b>-s</b>  step by n (use &apos;n:m&apos; to set total to m)
<b>-t</b>  set <b>progress</b> dialog label
<b>-w</b>  <b>progress</b> iterator</div>
</div>
<div class='def-row'>
<div class='def-label'>Arguments:</div>
<div class='def-text'><i>delay</i> <b>--dryrun</b> only: delay in [s] (example 0.3)
<i>done</i>  final text, use <b>&quot;-&quot;</b> for no text and no delay
<i>fmt</i>   a printf format string (example: <b>&quot;%s of %s&quot;</b>)
<i>labl</i>  label text to show
<i>prog</i>  <b>progress</b> in percent
<i>step</i>  usage dependent see examples (syntax: [n][:m])
<i>work</i>  callback function, returns 0 to continue reporting</div>
</div>
<div class='def-row'>
<div class='def-label'>Examples:</div>
<div class='def-text'><b>••• working in console and windows mode •••</b></div>
</div>
<div class='def-break'></div>
<div class='def-row'>
<div class='def-empty'></div>
<div class='def-text'>simple line output (notification messages for windows mode)...<pre><b>progress</b> <b>-l</b> <b>&quot;Breakfast at 7:00&quot;</b>         # notification for windows
sleep 0.4
<b>progress</b> <b>-p</b> <b>&quot;%s at %s&quot;</b> <b>&quot;Lunch&quot;</b> <b>&quot;13:00&quot;</b>  # notification for windows
sleep 0.4
<b>progress</b> <b>-t</b> <b>&quot;Dinner at 19:00&quot;</b>           # ignored for windows
sleep 0.4</pre></div>
</div>
<div class='def-break'></div>
<div class='def-row'>
<div class='def-empty'></div>
<div class='def-text'>appending line output (shows a dialog in windows mode)...<pre><b>progress</b> <b>&quot;Meals:&quot;</b>                       # windows: creates dialog
sleep 0.4
<b>progress</b> <b>-c</b> <b>&quot;Breakfast &quot;</b>                # windows: increment only
sleep 0.4
<b>progress</b> <b>-c</b> <b>&quot;Lunch &quot;</b>
sleep 0.4
<b>progress</b> <b>-c</b> <b>&quot;Dinner&quot;</b>
sleep 0.4
<b>progress</b>                                # clear mesg., close dialog</pre></div>
</div>
<div class='def-break'></div>
<div class='def-row'>
<div class='def-empty'></div>
<div class='def-text'>show a list of steps (notification messages for windows mode)...<pre><b>progress</b> <b>-l</b> <b>&quot;Winter&quot;</b> <b>&quot;Jan - Mar&quot;</b>
sleep 0.4
<b>progress</b> <b>-l</b> <b>&quot;Spring&quot;</b> <b>&quot;Apr - Jun&quot;</b>
sleep 0.4
<b>progress</b> <b>-l</b> <b>&quot;Summer&quot;</b> <b>&quot;Jul - Sep&quot;</b>
sleep 0.4
<b>progress</b> <b>-l</b> <b>&quot;Autumn&quot;</b> <b>&quot;Oct - Dec&quot;</b></pre></div>
</div>
<div class='def-break'></div>
<div class='def-row'>
<div class='def-empty'></div>
<div class='def-text'>run an iterator (calling a worker <b>totl</b> times, <b>progress</b> report is made
only if <b>totl</b> is at least <b>mini</b> ...<pre>worker() { return 0 ; }
<b>progress</b> <b>-w</b> worker <b>-d</b> 0.1 <b>-s</b> <b>&quot;$totl:$mini&quot;</b> <b>-c</b> <b>&quot;Step %s of %s ...&quot;</b> \
         <b>&quot;Progress Demo -&quot;</b> <b>&quot;Completed.&quot;</b></pre></div>
</div>
<div class='def-break'></div>
<div class='def-row'>
<div class='def-empty'></div>
<div class='def-text'>Show dots <b>progress</b> bar (compatible with windows mode) ...<pre><b>progress</b> <b>&quot;Running &quot;</b>
for item in 0 1 2 3 4 5 6 7 8 9 ; do
    sleep 1
    <b>progress</b> <b>-c</b> <b>&quot;.&quot;</b>
    done
quit <b>&quot;Demo over&quot;</b></pre></div>
</div>
<div class='def-break'></div>
<div class='def-row'>
<div class='def-empty'></div>
<div class='def-text'>••• console mode only •••</div>
</div>
<div class='def-break'></div>
<div class='def-row'>
<div class='def-empty'></div>
<div class='def-text'>Incremental <b>progress</b> reporting ...<pre><b>progress</b> <b>-l</b> <b>&quot;Wait for init ...&quot;</b>     # temporary message
sleep 3
message <b>&quot;Init done&quot;</b>                 # replace temp msg

<b>progress</b> <b>-a</b> <b>-l</b> <b>&quot;Phase I&quot;</b>            # new temp msg
sleep 3
<b>progress</b> <b>-a</b> <b>-l</b> <b>&quot;Phase II&quot;</b>           # replace tmp msg
sleep 3
<b>progress</b>                            # remove tmp msg
sleep 3
quit <b>&quot;Demo over&quot;</b></pre></div>
</div>
<div class='def-break'></div>
<div class='def-row'>
<div class='def-empty'></div>
<div class='def-text'>••• windows mode only •••</div>
</div>
<div class='def-break'></div>
<div class='def-row'>
<div class='def-empty'></div>
<div class='def-text'><pre><b>progress</b> <b>&quot;start&quot;</b>                   # show dialog, set label
<b>progress</b> <b>-c</b> <b>&quot;.&quot;</b>                    # increment progress
<b>progress</b> <b>&quot;new label&quot;</b>               # set label
<b>progress</b> <b>-t</b> <b>&quot;another label&quot;</b>        # set label only
<b>progress</b> <b>-c</b> 40                     # set progress to 40%
<b>progress</b> <b>-c</b> 70 <b>-t</b> <b>&quot;hallo&quot;</b>          # set progress and label
<b>progress</b>                           # clear</pre></div>
</div>
<div class='def-break'></div>
<div class='def-row'>
<div class='def-empty'></div>
<div class='def-text'><pre><b>progress</b> <b>-s</b> :3                     # set total steps (don&apos;t create dlg)
<b>progress</b> <b>-s</b> 2                      # add to current
<b>progress</b> <b>-s</b> 1:5 <b>-t</b> <b>&quot;Init&quot;</b>          # set total, show, add to current
<b>progress</b> <b>-s</b> 2 <b>&quot;Step&quot;</b>               # add to current</pre></div>
</div>
</section>
</article>
<div class='def-break'></div>
<nav><div class='nav-row'>
<div class='nav-left'><a href='_centauri_bash_pip.html'>[&lt;&lt; previous]</a></div>
<div class='nav-mid'><a href='#top'>[Top of Page]</a></div>
<div class='nav-mid'><a href='reference.html#top'>[Reference]</a></div>
<div class='nav-right'><a href='_centauri_bash_run.html'>[next &gt;&gt;]</a></div>
</div></nav>
</body></html>
